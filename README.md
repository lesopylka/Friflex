# ИЗВИНИТЕ ЗА МАТ

## Команда "ИаИА":
Климов Иван,
Иванов Илья,
Суляева Алина,
Варламова Анна.

## Описание

Этот проект разработан для загрузки и обработки видео файлов (MP4) и файлов шахматных партий (PGN) с использованием библиотек `Streamlit`, 'MoviePy'. Основная функция программы заключается в поиске и обработке интересных моментов в шахматных партиях и озвучке с помощью сервиса elevenlabs. 

Ноушен: https://flax-notify-cc2.notion.site/c5c73e059b4d47bcb8b81c35346fa15a

## Функционал

- Загрузка файлов MP4 и PGN через пользовательский интерфейс. Указываем время фактического начала партии(то есть первого хода)
- Интеграция с моделью GPT-4 для анализа шахматных партий.
- Озвучка при помощи elevenlabs.io
- Обрезка и обработка видеофрагментов по заданным временным меткам.
- Вывод результатов в видео проигрывателе на веб-странице.

## Установка и запуск

от имени администратора

1. **Клонировать репозиторий:**
   ```
   git clone https://gitlab.mai.ru/IAIA/friflex
   cd friflex
```
2. Установка зависимостей:
MoviePy автоматически использует FFmpeg для обработки видеофайлов, но иногда требуется установить FFmpeg отдельно.

```
pip install moviepy
```
Для Windows:

Скачайте последнюю версию FFmpeg с официального сайта FFmpeg.
Распакуйте архив в удобное место.
Добавьте путь к исполняемым файлам FFmpeg (bin директория) в переменную среды PATH.

Для macOS:

Установите FFmpeg с помощью Homebrew:
bash
Копировать код
brew install ffmpeg

Для Linux:

Установите FFmpeg через менеджер пакетов вашего дистрибутива:
bash
Копировать код
sudo apt update
sudo apt install ffmpeg  # Для Ubuntu/Debian
sudo dnf install ffmpeg  # Для Fedora

Установка и библиотека openAi
```
pip install openai

```

3. Запуск
ОТ ИМЕНИ АДМИНИСТРАТОРА!
streamlit run <путь к step_one.py> --server.maxUploadSize 1024


Использование
Без VPN работать не будет. Он очень важен.
После запуска приложения откройте ваш браузер по адресу http://localhost:8501. Используйте интерфейс для загрузки файлов и ввода необходимых данных для обработки видео.

Работает только на винде!

Совет: Перед загрузкой стоит повернуть видео влево, выставить горизонт. Иначе в итоге будет перевернутое видео.

Так же стоит сказать, что наше решение сейчас работает в два шага: 1) Запустить файл step_one.py. Загрузить на веб-сайт исходное видео и потом сохранить результат. 2) Запустить файл step_two.py. Загрузить новое обрезанное видео на новый сайт, с теме же параметрами. Вы получите готовое видео с озвучкой и коментариями.

Главная страница
Загрузка файлов: Выберите файлы MP4 и PGN для загрузки.
Ввод времени: Укажите время начала партии в видео.
Обработка: Нажмите кнопку "Обработать видео" для начала обработки.
Страница просмотра видео
Просмотр видео: На этой странице можно просмотреть результаты обработки.
